# Практика: Приложение «Расписание автобусов».

### Прежде чем начать

В уроке Persist Data with Room вы узнали, как реализовать базу данных Room в приложении для Android. Это упражнение дает возможность более подробно ознакомиться с реализацией баз данных Room с помощью самостоятельного набора шагов.

В этом практическом наборе вы используете концепции, изученные в кодебазе Persist Data with Room, чтобы завершить приложение Bus Schedule. Это приложение представляет пользователю список автобусных остановок и расписания отправлений, используя данные из базы данных Room.

Код решения доступен в конце. Чтобы извлечь максимальную пользу из этого учебного опыта, постарайтесь реализовать и устранить как можно больше проблем до того, как вы посмотрите на предоставленный код решения. Именно во время практической работы вы узнаете больше всего нового.

### Предварительные условия

- Курс «Основы Android с Compose» в рамках кодовой лаборатории Persist Data with Room.

### Что вам понадобится

- Компьютер с доступом в интернет и Android Studio
- Стартовый код `Bus Schedule`

### Что вы будете создавать

В этом практическом наборе вы завершите работу над приложением «Расписание автобусов», реализовав базу данных, а затем доставив данные в пользовательский интерфейс с помощью базы данных. Файл базы данных в каталоге активов, находящемся в стартовом коде, содержит данные для приложения. Вы загружаете эти данные в базу данных и делаете их доступными для чтения приложением.

После завершения работы приложение отображает список автобусных остановок и соответствующее время прибытия. Вы можете нажать на элемент в списке, чтобы перейти к экрану с подробными данными об этой остановке.

Завершенное приложение показывает эти данные, загруженные из базы данных Room:

![](https://developer.android.com/static/codelabs/basic-android-kotlin-compose-practice-bus-schedule-app/img/cdb6f9e79137f323_856.png)

![](https://developer.android.com/static/codelabs/basic-android-kotlin-compose-practice-bus-schedule-app/img/6c59e6f57f59bd27_856.png)


### Загрузите стартовый код

URL стартового кода:

https://github.com/google-developer-training/basic-android-kotlin-compose-training-bus-schedule-app

Имя ветки с кодом стартера: starter

В Android Studio откройте папку basic-android-kotlin-compose-training-bus-schedule.
Откройте код приложения «Расписание автобусов» в Android Studio.
Нажмите кнопку Run 65e9e2045e2dc48b.png, чтобы собрать и запустить приложение.
Ожидается, что приложение будет отображать расписание с одной остановкой, если оно собрано из кода стартовой ветки.

![](https://developer.android.com/static/codelabs/basic-android-kotlin-compose-practice-bus-schedule-app/img/3603c91854cada9a_856.png)


### Добавьте зависимости

Добавьте в приложение следующие зависимости:

app/build.gradle.kts
``kt
implementation(«androidx.room:room-ktx:${rootProject.extra[»room_version«]}»)
implementation(«androidx.room:room-runtime:${rootProject.extra[»room_version«]}»)
ksp(«androidx.room:room-compiler:${rootProject.extra[»room_version«]}»)
```

Вы должны получить самую актуальную стабильную версию room из документации Room и добавить правильный номер версии. На данный момент последней версией является:

build.gradle.kts
```kt
set("room_version", "2.5.1")
```

### Создание сущности Room

Преобразуйте текущий класс данных Bus Schedule в сущность Room.

На следующем изображении показан пример того, как выглядит итоговая таблица данных, включая схему и свойство Entity.

![](https://developer.android.com/static/codelabs/basic-android-kotlin-compose-practice-bus-schedule-app/img/9587f9a5f035e552_856.png)


### Создание объекта доступа к данным

Создайте объект доступа к данным (DAO) для доступа к базе данных. DAO предоставляет метод для получения всех элементов в базе данных и метод для получения одного элемента с названием автобусной остановки. Убедитесь, что расписание упорядочено по времени прибытия.


### Создайте экземпляр базы данных
Создайте базу данных Room, которая использует сущность Entity и ваш DAO. База данных инициализируется данными из файла assets/database/bus_schedule.db в стартовом коде.


### Обновление ViewModel
Обновите ViewModel, чтобы получать данные из DAO и предоставлять их в пользовательский интерфейс вместо того, чтобы поставлять данные из образца. Обязательно используйте оба метода DAO для предоставления данных для списка и для отдельных остановок.


### Код решения

https://github.com/google-developer-training/basic-android-kotlin-compose-training-bus-schedule-app

Название ветки с кодом решения: main